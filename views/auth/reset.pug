extends layout

block content
  h1= title

  form(method="POST" action=is_first_step ? "/users/reset" : "/users/resetfinal")

    if is_first_step
      p Please enter your username and email. If they match a user, you will be redirected to the password reset page.
      .form-floating
        input#username.form-control(type="text" placeholder="johndoe" name="username" required=is_first_step value=(undefined===user ? "" : user.username))
        label(for="username") Username:
      .form-floating
        input#email.form-control(type="email" placeholder="johndoe@john.doe" name="email" required=is_first_step value=(undefined===user ? "" : user.email))
        label(for="email") E-mail:
      
    if is_second_step
      p Almost there. Enter your new password twice and you're good to go!
      .form-floating
        input#password.form-control(type="password" name="password" required=is_second_step)
        label(for="password") New Password:
      .form-floating
        input#password_confirm.form-control(type="password" name="password_confirm" required=is_second_step)
        label(for="password_confirm") Confirm New Password:
      input(type="hidden" name="userid" value=user._id)
      
    button.btn.btn-primary(type="submit") #{is_first_step ? "Next" : "Done"} 

  br
  if errors
    ul
      for error in errors
        li!= error.msg